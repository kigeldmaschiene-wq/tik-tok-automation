<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TikTok & Instagram Automation (Single‑File)</title>
  <style>
    :root{--bg:#0b0c10;--card:#111318;--muted:#9aa4b2;--border:#1f2430;--brand:#00D09C}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:#e5e7eb}
    .wrap{max-width:980px;margin:24px auto;padding:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:16px}
    h1{font-size:22px;margin:0 0 12px} h2{font-size:18px;margin:8px 0}
    label{display:block;font-size:12px;color:var(--muted);margin-top:10px}
    input,select,textarea{width:100%;padding:10px;margin-top:6px;background:#0f1116;border:1px solid #2a3140;border-radius:10px;color:#e5e7eb}
    button{background:var(--brand);color:#0b0c10;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    button:disabled{opacity:.5;cursor:not-allowed}
    .row{display:grid;grid-template-columns:1fr 1fr; gap:12px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr; gap:12px}
    .hint{font-size:12px;color:var(--muted)}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{padding:8px;border-bottom:1px solid var(--border);text-align:left}
    .badge{display:inline-block;background:#151a22;border:1px solid #273042;padding:3px 8px;border-radius:999px;margin-right:6px;font-size:11px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>TikTok & Instagram Automation (Single‑File)</h1>
      <div class="hint">Einfaches Web‑UI ohne Installation. Später kannst du echte API‑Uploads (D‑ID, Json2Video, TikTok/IG) verbinden. Brand‑Farbe: <span class="badge">#00D09C</span></div>
    </div>

    <div class="card">
      <h2>Composer</h2>
      <div class="row3">
        <div>
          <label>Plattform</label>
          <select id="platform">
            <option value="tiktok">TikTok</option>
            <option value="instagram">Instagram</option>
          </select>
        </div>
        <div>
          <label>Format</label>
          <select id="format">
            <option value="post">Post / Reel</option>
            <option value="story">Story (≤ 15s)</option>
          </select>
        </div>
        <div>
          <label>TikTok Modus</label>
          <select id="ttMode">
            <option value="direct">Direct Post</option>
            <option value="draft">Draft (Trend‑Sound später)</option>
          </select>
        </div>
      </div>

      <div class="row3">
        <div>
          <label>Avatar</label>
          <select id="avatar">
            <option>Avatar 1</option>
            <option>Avatar 2</option>
            <option>Avatar 3</option>
            <option>Avatar 4</option>
          </select>
        </div>
        <div>
          <label>Stimme</label>
          <select id="voice">
            <option>Katja (w, DE)</option>
            <option>Conrad (m, DE)</option>
            <option>Ingrid (w, AT)</option>
            <option>Leni (w, CH)</option>
          </select>
        </div>
        <div>
          <label>Brand‑Farbe</label>
          <input type="color" id="brand" value="#00D09C" />
        </div>
      </div>

      <div>
        <label>Look / Stil‑Notiz</label>
        <input id="look" placeholder="Hintergrund, Licht, Kleidung, Stimmung" value="Dunkler Hintergrund, Teal‑Akzent, seriös, ruhige Mimik"/>
      </div>

      <div class="row3">
        <div>
          <label>Wasserzeichen</label>
          <select id="wmOn">
            <option value="true">Aktiv</option>
            <option value="false">Aus</option>
          </select>
        </div>
        <div>
          <label>Wasserzeichen‑Text</label>
          <input id="wmText" placeholder="@deinusername" value="@deinusername"/>
        </div>
        <div>
          <label>Musik</label>
          <select id="music"></select>
        </div>
      </div>

      <div>
        <label>Hook</label>
        <input id="hook" placeholder="Starker Einstiegssatz" value="90 % scheitern – vermeide diese 3 Fallen…"/>
      </div>
      <div>
        <label>Skript (Voiceover)</label>
        <textarea id="script" rows="5" placeholder="Text den der Avatar spricht">Kurzer Beispiel‑Text fürs Voiceover …</textarea>
      </div>
      <div>
        <label>Hashtags</label>
        <input id="tags" value="#kibusiness #digitalbusiness #futureofwork #arbeitmitki #onlinebusiness" />
      </div>

      <div class="row">
        <div>
          <label>Datum & Uhrzeit</label>
          <input id="when" type="datetime-local" />
        </div>
        <div style="display:flex;align-items:flex-end;justify-content:flex-end">
          <button id="planBtn" disabled>Planen / Starten</button>
        </div>
      </div>
      <p class="hint">Hinweis: Diese Single‑File Version speichert lokal im Browser (keine echten Uploads). Für volle Automatisierung später Vercel + API‑Keys verbinden.</p>
    </div>

    <div class="card">
      <h2>Bibliothek</h2>
      <table>
        <thead>
          <tr>
            <th>Datum</th><th>Plattform</th><th>Format</th><th>Avatar</th><th>Hook</th><th>Status</th><th>Link</th>
          </tr>
        </thead>
        <tbody id="rows">
          <tr><td colspan="7" class="hint">Noch keine Einträge. Plane oben dein erstes Video.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const MUSIC_PRESETS = [
      'Corporate Future Bass','Uplifting Motivational','Dreams','Upbeat Technology','Epic Inspire',
      'Pop Dance','Nimbus','Summer Vibes','Tropical House','Island Dream',
      'Dark Future Bass','Ticker','Cinematic Tension','Hybrid Trap','Unstoppable',
      'LoFi Chillhop','Sunday Rain','Soft Corporate','Digital Flow','Clear Sky',
      'Keine Musik','App-Sound (Draft)'
    ];

    const $ = (id)=>document.getElementById(id);
    const rowsEl = $('rows');

    // init music options
    const musicSel = $('music');
    MUSIC_PRESETS.forEach(m=>{ const o=document.createElement('option'); o.textContent=m; musicSel.appendChild(o); });

    const inputs = ['hook','script','when'];
    function check(){
      const ok = inputs.every(id=>$(id).value.trim());
      $('planBtn').disabled = !ok;
    }
    inputs.forEach(id=>$(id).addEventListener('input', check)); check();

    function addRow(data){
      // remove placeholder row
      if(rowsEl.children.length===1 && rowsEl.children[0].children[0].colSpan===7){ rowsEl.innerHTML=''; }
      const tr=document.createElement('tr');
      tr.innerHTML = `<td>${data.when}</td><td>${data.platform}</td><td>${data.format}${data.platform==='tiktok'? ' · '+data.ttMode:''}</td><td>${data.avatar}</td><td>${data.hook}</td><td>${data.status}</td><td>${data.link||'-'}</td>`;
      rowsEl.prepend(tr);
    }

    $('planBtn').addEventListener('click', ()=>{
      const risky = /(\d{2,4}\s?€\s?\/(Tag|Monat))|garantiert|sicher reich|schnell reich|earn|income|rich/i;
      const txt = $('hook').value + ' ' + $('script').value;
      if(risky.test(txt)) alert('Hinweis: Vermeide €-Summen, Garantien, "schnell reich" – könnte gegen Richtlinien verstoßen.');

      const data = {
        platform: $('platform').value,
        format: $('format').value,
        ttMode: $('ttMode').value,
        avatar: $('avatar').value,
        voice: $('voice').value,
        brand: $('brand').value,
        look: $('look').value,
        wmOn: $('wmOn').value==='true',
        wmText: $('wmText').value,
        music: $('music').value,
        hook: $('hook').value,
        script: $('script').value,
        tags: $('tags').value,
        when: $('when').value,
        status: 'INIT', link:''
      };

      const all = JSON.parse(localStorage.getItem('jobs')||'[]');
      all.unshift(data); localStorage.setItem('jobs', JSON.stringify(all));
      addRow(data);
      alert('Geplant! (lokal gespeichert)');
    });

    // load existing
    const saved = JSON.parse(localStorage.getItem('jobs')||'[]');
    if(saved.length){ saved.forEach(addRow); }

    // sync ttMode disable when not TikTok
    $('platform').addEventListener('change', ()=>{
      $('ttMode').disabled = $('platform').value!=='tiktok';
    });
  </script>
</body>
</html>
